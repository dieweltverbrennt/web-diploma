{"ast":null,"code":"import { ref, onMounted, computed } from 'vue';\nimport apiRequest from '@/axios.js';\nexport default {\n  __name: 'Movie',\n  props: {\n    film: {\n      type: Object\n    }\n  },\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const props = __props;\n    const halls = ref([]);\n    const srcToImg = ref(require(`@/assets/client/img/${props.film.path_to_image}`));\n    onMounted(async () => {\n      // console.log(props.film.sessions);\n      try {\n        const response = await apiRequest.get('/halls');\n        // halls.value = response.data.halls;\n        halls.value = response.data.halls.filter(hall => {\n          return hall.sessions.some(session => session.film_id === props.film.id);\n        });\n        console.log(halls.value);\n      } catch (error) {\n        console.error('Ошибка при получении данных:', error);\n      }\n    });\n    const filteredSessions = hall => {\n      return hall.sessions.filter(session => session.film_id === props.film.id);\n    };\n    const __returned__ = {\n      props,\n      halls,\n      srcToImg,\n      filteredSessions,\n      ref,\n      onMounted,\n      computed,\n      get apiRequest() {\n        return apiRequest;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","computed","apiRequest","props","__props","halls","srcToImg","require","film","path_to_image","response","get","value","data","filter","hall","sessions","some","session","film_id","id","console","log","error","filteredSessions"],"sources":["C:/Users/Marya/Desktop/cinema-booking-app/client/src/components/client/index/Movie.vue"],"sourcesContent":["<template>\r\n    <section class=\"movie\">\r\n        <div class=\"movie__info\">\r\n            <div class=\"movie__poster\">\r\n                <img class=\"movie__poster-image\" :alt=\"props.film.name\" :src=\"srcToImg\">\r\n            </div>\r\n            <div class=\"movie__description\">\r\n                <h2 class=\"movie__title\">{{ props.film.name }}</h2>\r\n                <p class=\"movie__synopsis\">{{ props.film.description }}</p>\r\n                <p class=\"movie__data\">\r\n                    <span class=\"movie__data-duration\">{{ props.film.duration }}</span>\r\n                    <span> | </span>\r\n                    <span class=\"movie__data-origin\">{{ props.film.production_country }}</span>\r\n                </p>\r\n            </div>\r\n        </div>  \r\n\r\n        <div class=\"movie-seances__hall\" \r\n            v-for=\"hall in halls\" \r\n            :key=\"hall.id\"\r\n        >\r\n            <h3 class=\"movie-seances__hall-title\">Зал {{ hall.hall_number}}</h3>\r\n            <ul class=\"movie-seances__list\">\r\n                <router-link class=\"movie-seances__time-block\"\r\n                    v-for=\"session in filteredSessions(hall)\" \r\n                    :key=\"session.id\"\r\n                    :to=\"{name: '/hall-client'}\"\r\n                >\r\n                    {{ session.start_time.split(':').slice(0, 2).join(':') }}</router-link>\r\n            </ul>\r\n        </div>\r\n    </section>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, defineProps, computed } from 'vue';\r\nimport apiRequest from '@/axios.js';\r\n\r\nconst props = defineProps({\r\n    film: {\r\n        type: Object,\r\n    }\r\n});\r\nconst halls = ref([]);\r\n\r\nconst srcToImg = ref(require(`@/assets/client/img/${props.film.path_to_image}`));\r\n\r\nonMounted(async () => {\r\n    // console.log(props.film.sessions);\r\n    try {\r\n        const response = await apiRequest.get('/halls');\r\n        // halls.value = response.data.halls;\r\n        halls.value = response.data.halls.filter(hall => {\r\n            return hall.sessions.some(session => session.film_id === props.film.id);\r\n        })\r\n        console.log(halls.value);\r\n    } catch (error) {\r\n        console.error('Ошибка при получении данных:', error);\r\n    }\r\n});\r\n\r\nconst filteredSessions = (hall) => {\r\n  return hall.sessions.filter(session => session.film_id === props.film.id);\r\n};\r\n</script>"],"mappings":"AAmCA,SAASA,GAAG,EAAEC,SAAsB,EAAEC,QAAQ,QAAQ,KAAK;AAC3D,OAAOC,UAAU,MAAM,YAAY;;;;;;;;;;;;IAEnC,MAAMC,KAAK,GAAGC,OAIZ;IACF,MAAMC,KAAK,GAAGN,GAAG,CAAC,EAAE,CAAC;IAErB,MAAMO,QAAQ,GAAGP,GAAG,CAACQ,OAAO,CAAE,uBAAsBJ,KAAK,CAACK,IAAI,CAACC,aAAc,EAAC,CAAC,CAAC;IAEhFT,SAAS,CAAC,YAAY;MAClB;MACA,IAAI;QACA,MAAMU,QAAQ,GAAG,MAAMR,UAAU,CAACS,GAAG,CAAC,QAAQ,CAAC;QAC/C;QACAN,KAAK,CAACO,KAAK,GAAGF,QAAQ,CAACG,IAAI,CAACR,KAAK,CAACS,MAAM,CAACC,IAAI,IAAI;UAC7C,OAAOA,IAAI,CAACC,QAAQ,CAACC,IAAI,CAACC,OAAO,IAAIA,OAAO,CAACC,OAAO,KAAKhB,KAAK,CAACK,IAAI,CAACY,EAAE,CAAC;QAC3E,CAAC,CAAC;QACFC,OAAO,CAACC,GAAG,CAACjB,KAAK,CAACO,KAAK,CAAC;MAC5B,CAAC,CAAC,OAAOW,KAAK,EAAE;QACZF,OAAO,CAACE,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;MACxD;IACJ,CAAC,CAAC;IAEF,MAAMC,gBAAgB,GAAIT,IAAI,IAAK;MACjC,OAAOA,IAAI,CAACC,QAAQ,CAACF,MAAM,CAACI,OAAO,IAAIA,OAAO,CAACC,OAAO,KAAKhB,KAAK,CAACK,IAAI,CAACY,EAAE,CAAC;IAC3E,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}
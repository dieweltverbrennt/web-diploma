{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"ticket\"\n};\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"header\", {\n  class: \"tichet__check\"\n}, [/*#__PURE__*/_createElementVNode(\"h2\", {\n  class: \"ticket__check-title\"\n}, \"Вы выбрали билеты:\")], -1 /* HOISTED */);\nconst _hoisted_3 = {\n  class: \"ticket__info-wrapper\"\n};\nconst _hoisted_4 = {\n  class: \"ticket__info\"\n};\nconst _hoisted_5 = {\n  class: \"ticket__details ticket__title\"\n};\nconst _hoisted_6 = {\n  class: \"ticket__info\"\n};\nconst _hoisted_7 = {\n  class: \"ticket__details ticket__chairs\"\n};\nconst _hoisted_8 = {\n  class: \"ticket__info\"\n};\nconst _hoisted_9 = {\n  class: \"ticket__details ticket__hall\"\n};\nconst _hoisted_10 = {\n  class: \"ticket__info\"\n};\nconst _hoisted_11 = {\n  class: \"ticket__details ticket__start\"\n};\nconst _hoisted_12 = {\n  key: 0\n};\nconst _hoisted_13 = /*#__PURE__*/_createElementVNode(\"p\", {\n  class: \"ticket__hint\"\n}, \"Покажите QR-код нашему контроллеру для подтверждения бронирования.\", -1 /* HOISTED */);\nconst _hoisted_14 = /*#__PURE__*/_createElementVNode(\"p\", {\n  class: \"ticket__hint\"\n}, \"Приятного просмотра!\", -1 /* HOISTED */);\nconst _hoisted_15 = {\n  key: 1\n};\nconst _hoisted_16 = {\n  class: \"ticket__info\"\n};\nconst _hoisted_17 = {\n  class: \"ticket__details ticket__cost\"\n};\nconst _hoisted_18 = /*#__PURE__*/_createElementVNode(\"p\", {\n  class: \"ticket__hint\"\n}, \"После оплаты билет будет доступен в этом окне, а также придёт вам на почту. Покажите QR-код нашему контроллёру у входа в зал.\", -1 /* HOISTED */);\nconst _hoisted_19 = /*#__PURE__*/_createElementVNode(\"p\", {\n  class: \"ticket__hint\"\n}, \"Приятного просмотра!\", -1 /* HOISTED */);\nexport function render(_ctx, _cache) {\n  const _component_qrcode_vue = _resolveComponent(\"qrcode-vue\");\n  return _openBlock(), _createElementBlock(\"main\", null, [_createElementVNode(\"section\", _hoisted_1, [_hoisted_2, _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"p\", _hoisted_4, [_createTextVNode(\"На фильм: \"), _createElementVNode(\"span\", _hoisted_5, _toDisplayString(_ctx.film.name), 1 /* TEXT */)]), _createElementVNode(\"p\", _hoisted_6, [_createTextVNode(\"Места: \"), _createElementVNode(\"span\", _hoisted_7, _toDisplayString(_ctx.seats.join(', ')), 1 /* TEXT */)]), _createElementVNode(\"p\", _hoisted_8, [_createTextVNode(\"В зале: \"), _createElementVNode(\"span\", _hoisted_9, _toDisplayString(_ctx.hall.hall_number), 1 /* TEXT */)]), _createElementVNode(\"p\", _hoisted_10, [_createTextVNode(\"Начало сеанса: \"), _createElementVNode(\"span\", _hoisted_11, _toDisplayString(_ctx.session.start_time), 1 /* TEXT */)]), _ctx.isPaid ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [_createCommentVNode(\" <img class=\\\"ticket__info-qr\\\" src=\\\"@/assets/client/img/qr-code.png\\\"> \"), _createVNode(_component_qrcode_vue, {\n    text: _ctx.qrCodeData\n  }, null, 8 /* PROPS */, [\"text\"]), _hoisted_13, _hoisted_14])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_15, [_createElementVNode(\"p\", _hoisted_16, [_createTextVNode(\"Стоимость: \"), _createElementVNode(\"span\", _hoisted_17, _toDisplayString(_ctx.price), 1 /* TEXT */), _createTextVNode(\" рублей\")]), _createElementVNode(\"button\", {\n    class: \"acceptin-button\",\n    onClick: _cache[0] || (_cache[0] = (...args) => _ctx.onGetCodeClick && _ctx.onGetCodeClick(...args))\n  }, \"Получить код бронирования\"), _hoisted_18, _hoisted_19]))])])]);\n}","map":{"version":3,"names":["class","_createElementVNode","key","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_createTextVNode","_hoisted_5","_toDisplayString","_ctx","film","name","_hoisted_6","_hoisted_7","seats","join","_hoisted_8","_hoisted_9","hall","hall_number","_hoisted_10","_hoisted_11","session","start_time","isPaid","_hoisted_12","_createCommentVNode","_createVNode","_component_qrcode_vue","text","qrCodeData","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","price","onClick","_cache","args","onGetCodeClick","_hoisted_18","_hoisted_19"],"sources":["C:\\Users\\Marya\\Desktop\\cinema-booking-app\\client\\src\\components\\client\\PaymentPage.vue"],"sourcesContent":["<template>\r\n    <main>\r\n        <section class=\"ticket\">\r\n        \r\n        <header class=\"tichet__check\">\r\n            <h2 class=\"ticket__check-title\">Вы выбрали билеты:</h2>\r\n        </header>\r\n        \r\n        <div class=\"ticket__info-wrapper\">\r\n            <p class=\"ticket__info\">На фильм: <span class=\"ticket__details ticket__title\">{{ film.name }}</span></p>\r\n            <p class=\"ticket__info\">Места: <span class=\"ticket__details ticket__chairs\">{{ seats.join(', ') }}</span></p>\r\n            <p class=\"ticket__info\">В зале: <span class=\"ticket__details ticket__hall\">{{ hall.hall_number }}</span></p>\r\n            <p class=\"ticket__info\">Начало сеанса: <span class=\"ticket__details ticket__start\">{{ session.start_time }}</span></p>\r\n\r\n            <div v-if=\"isPaid\">\r\n                <!-- <img class=\"ticket__info-qr\" src=\"@/assets/client/img/qr-code.png\"> -->\r\n                <qrcode-vue :text=\"qrCodeData\"></qrcode-vue>\r\n\r\n                <p class=\"ticket__hint\">Покажите QR-код нашему контроллеру для подтверждения бронирования.</p>\r\n                <p class=\"ticket__hint\">Приятного просмотра!</p>\r\n            </div>\r\n\r\n            <div v-else>\r\n                <p class=\"ticket__info\">Стоимость: <span class=\"ticket__details ticket__cost\">{{ price }}</span> рублей</p>\r\n\r\n                <button class=\"acceptin-button\" @click=\"onGetCodeClick\">Получить код бронирования</button>\r\n\r\n                <p class=\"ticket__hint\">После оплаты билет будет доступен в этом окне, а также придёт вам на почту. Покажите QR-код нашему контроллёру у входа в зал.</p>\r\n                <p class=\"ticket__hint\">Приятного просмотра!</p>\r\n            </div>\r\n        </div>\r\n        </section>     \r\n    </main>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport apiRequest from '@/axios.js';\r\nimport { useRoute } from 'vue-router';\r\nimport QrcodeVue from 'vue-qrcode-component';\r\n\r\nconst route = useRoute();\r\nconst sessionId = route.params.sessionId;\r\nconst seatsIds = route.params.seatsId;\r\n\r\nconst session = ref({});\r\nconst film = ref({});\r\nconst hall = ref({});\r\nconst seats = ref([]);\r\nlet price = ref(null);\r\nconst isPaid = ref(false);\r\nconst qrCodeData = ref('');\r\n\r\nonMounted(async () => {\r\n    try {\r\n        const responseSession = await apiRequest.get(`/sessions/${sessionId}`);\r\n        session.value = responseSession.data.session;\r\n        film.value = responseSession.data.session.film;\r\n        hall.value = responseSession.data.session.hall;\r\n        session.value.start_time = session.value.start_time.split(':').slice(0, 2).join(':');\r\n\r\n        const responseSeats = await apiRequest.get(`/seats/${seatsIds}`);\r\n        price.value = 0;\r\n        if(responseSeats.data.seats) {\r\n            responseSeats.data.seats.forEach(element => {\r\n                seats.value.push(element.seat_number);\r\n                price.value += element.price;\r\n            });\r\n        }\r\n    } catch (error) {\r\n        console.error('Ошибка при получении данных:', error);\r\n    }\r\n});\r\n\r\nconst onGetCodeClick = (() => {\r\n    isPaid.value = true;\r\n    console.log(seats)\r\n    qrCodeData.value = `Места: ${seatsIds}, Сеанс: ${}`\r\n});\r\n</script>"],"mappings":";;EAEiBA,KAAK,EAAC;AAAQ;gCAEvBC,mBAAA,CAES;EAFDD,KAAK,EAAC;AAAe,I,aACzBC,mBAAA,CAAuD;EAAnDD,KAAK,EAAC;AAAqB,GAAC,oBAAkB,E;;EAGjDA,KAAK,EAAC;AAAsB;;EAC1BA,KAAK,EAAC;AAAc;;EAAiBA,KAAK,EAAC;AAA+B;;EAC1EA,KAAK,EAAC;AAAc;;EAAcA,KAAK,EAAC;AAAgC;;EACxEA,KAAK,EAAC;AAAc;;EAAeA,KAAK,EAAC;AAA8B;;EACvEA,KAAK,EAAC;AAAc;;EAAsBA,KAAK,EAAC;AAA+B;;EAZ9FE,GAAA;AAAA;iCAkBgBD,mBAAA,CAA8F;EAA3FD,KAAK,EAAC;AAAc,GAAC,oEAAkE;iCAC1FC,mBAAA,CAAgD;EAA7CD,KAAK,EAAC;AAAc,GAAC,sBAAoB;;EAnB5DE,GAAA;AAAA;;EAuBmBF,KAAK,EAAC;AAAc;;EAAkBA,KAAK,EAAC;AAA8B;iCAI7EC,mBAAA,CAAyJ;EAAtJD,KAAK,EAAC;AAAc,GAAC,+HAA6H;iCACrJC,mBAAA,CAAgD;EAA7CD,KAAK,EAAC;AAAc,GAAC,sBAAoB;;;uBA3BxDG,mBAAA,CA+BO,eA9BHF,mBAAA,CA6BU,WA7BVG,UA6BU,GA3BVC,UAES,EAETJ,mBAAA,CAsBM,OAtBNK,UAsBM,GArBFL,mBAAA,CAAwG,KAAxGM,UAAwG,GATpHC,gBAAA,CASoC,YAAU,GAAAP,mBAAA,CAAkE,QAAlEQ,UAAkE,EAAAC,gBAAA,CAAnBC,IAAA,CAAAC,IAAI,CAACC,IAAI,iB,GAC1FZ,mBAAA,CAA6G,KAA7Ga,UAA6G,GAVzHN,gBAAA,CAUoC,SAAO,GAAAP,mBAAA,CAA0E,QAA1Ec,UAA0E,EAAAL,gBAAA,CAA1BC,IAAA,CAAAK,KAAK,CAACC,IAAI,uB,GACzFhB,mBAAA,CAA4G,KAA5GiB,UAA4G,GAXxHV,gBAAA,CAWoC,UAAQ,GAAAP,mBAAA,CAAwE,QAAxEkB,UAAwE,EAAAT,gBAAA,CAA1BC,IAAA,CAAAS,IAAI,CAACC,WAAW,iB,GAC9FpB,mBAAA,CAAsH,KAAtHqB,WAAsH,GAZlId,gBAAA,CAYoC,iBAAe,GAAAP,mBAAA,CAA2E,QAA3EsB,WAA2E,EAAAb,gBAAA,CAA5BC,IAAA,CAAAa,OAAO,CAACC,UAAU,iB,GAE7Fd,IAAA,CAAAe,MAAM,I,cAAjBvB,mBAAA,CAMM,OApBlBwB,WAAA,GAegBC,mBAAA,6EAA4E,EAC5EC,YAAA,CAA4CC,qBAAA;IAA/BC,IAAI,EAAEpB,IAAA,CAAAqB;EAAU,mCAE7BC,WAA8F,EAC9FC,WAAgD,C,oBAGpD/B,mBAAA,CAOM,OA7BlBgC,WAAA,GAuBgBlC,mBAAA,CAA2G,KAA3GmC,WAA2G,GAvB3H5B,gBAAA,CAuBwC,aAAW,GAAAP,mBAAA,CAA6D,QAA7DoC,WAA6D,EAAA3B,gBAAA,CAAfC,IAAA,CAAA2B,KAAK,kBAvBtG9B,gBAAA,CAuBgH,SAAO,E,GAEvGP,mBAAA,CAA0F;IAAlFD,KAAK,EAAC,iBAAiB;IAAEuC,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAE9B,IAAA,CAAA+B,cAAA,IAAA/B,IAAA,CAAA+B,cAAA,IAAAD,IAAA,CAAc;KAAE,2BAAyB,GAEjFE,WAAyJ,EACzJC,WAAgD,C"},"metadata":{},"sourceType":"module","externalDependencies":[]}
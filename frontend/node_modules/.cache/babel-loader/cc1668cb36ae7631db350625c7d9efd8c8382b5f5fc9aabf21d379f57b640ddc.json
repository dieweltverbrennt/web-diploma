{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"login\"\n};\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"header\", {\n  class: \"login__header\"\n}, [/*#__PURE__*/_createElementVNode(\"h2\", {\n  class: \"login__title\"\n}, \"Авторизация\")], -1 /* HOISTED */);\nconst _hoisted_3 = {\n  class: \"login__wrapper\"\n};\nconst _hoisted_4 = {\n  class: \"login__form\",\n  \"accept-charset\": \"utf-8\"\n};\nconst _hoisted_5 = {\n  class: \"login__label\",\n  for: \"email\"\n};\nconst _hoisted_6 = {\n  class: \"login__label\",\n  for: \"pwd\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"section\", _hoisted_1, [_hoisted_2, _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"form\", _hoisted_4, [_createElementVNode(\"label\", _hoisted_5, [_createTextVNode(\" E-mail \"), _withDirectives(_createElementVNode(\"input\", {\n    class: \"login__input\",\n    type: \"email\",\n    placeholder: \"example@domain.xyz\",\n    name: \"email\",\n    required: \"\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => _ctx.emailValue = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, _ctx.emailValue]])]), _createElementVNode(\"label\", _hoisted_6, [_createTextVNode(\" Пароль \"), _withDirectives(_createElementVNode(\"input\", {\n    class: \"login__input\",\n    type: \"password\",\n    placeholder: \"\",\n    name: \"password\",\n    autocomplete: \"on\",\n    required: \"\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => _ctx.passwordValue = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, _ctx.passwordValue]])]), _createElementVNode(\"div\", {\n    class: \"text-center\"\n  }, [_createElementVNode(\"input\", {\n    value: \"Авторизоваться\",\n    onClick: $setup.onClick,\n    type: \"submit\",\n    class: \"login__button\"\n  })])])])]);\n}","map":{"version":3,"names":["class","_createElementVNode","for","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_createTextVNode","type","placeholder","name","required","_cache","$event","_ctx","emailValue","_hoisted_6","autocomplete","passwordValue","value","onClick","$setup"],"sources":["C:\\Users\\Marya\\Desktop\\cinema-booking-app\\client\\src\\components\\admin\\LoginPage.vue"],"sourcesContent":["<template>\r\n    <section class=\"login\">\r\n      <header class=\"login__header\">\r\n        <h2 class=\"login__title\">Авторизация</h2>\r\n      </header>\r\n      <div class=\"login__wrapper\">\r\n        <form class=\"login__form\" accept-charset=\"utf-8\">\r\n          <label class=\"login__label\" for=\"email\">\r\n            E-mail\r\n            <input class=\"login__input\" type=\"email\" placeholder=\"example@domain.xyz\" name=\"email\" required v-model=\"emailValue\">\r\n          </label>\r\n          <label class=\"login__label\" for=\"pwd\">\r\n            Пароль\r\n            <input class=\"login__input\" type=\"password\" placeholder=\"\" name=\"password\" autocomplete=\"on\" required v-model=\"passwordValue\">\r\n          </label>\r\n          <div class=\"text-center\">\r\n            <input value=\"Авторизоваться\"  @click=\"onClick\" type=\"submit\" class=\"login__button\">\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </section>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport apiRequest from '@/axios.js';\r\nimport { useRouter } from 'vue-router';\r\nimport axios from 'axios';\r\nimport Cookies from 'js-cookie';\r\n\r\nconst router = useRouter();\r\n\r\nconst email = ref('');\r\nconst password = ref('');\r\n\r\nconst setEmail = (value) => {\r\n  emailValue.value = value;\r\n  console.log(emailValue.value)\r\n};\r\n\r\nconst setPassword = (value) => {\r\n  passwordValue.value = value;\r\n  console.log(passwordValue.value)\r\n};\r\n\r\nonMounted(async () => {\r\n    // console.log(apiRequest.defaults)\r\n    // try {\r\n    //     const response = await apiRequest.get(`/login`, {\r\n    //         email: 'admin1@gmail.com',\r\n    //         name: 'admin1',\r\n    //         password: '123123123',\r\n    //         withCredentials: true \r\n    //         });\r\n    //     console.log(response);\r\n    // } catch (error) {\r\n    //     console.error('Ошибка при получении данных:', error);\r\n    // }\r\n});\r\n\r\nconst onClick = ( (e) => {\r\n    e.preventDefault();\r\n\r\n    apiRequest.post('/login', {\r\n      name: 'admin1',\r\n      password: '123123123',\r\n      withCredentials: true\r\n    }).then(response => {\r\n      if(response.data.token) {\r\n        localStorage.setItem('token', response.data.token);\r\n        apiRequest.get('/access', {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`\r\n          }\r\n        }).then(response => {\r\n          if(response.data.success) {\r\n            router.push({ name: 'redactor-admin' });\r\n          }\r\n        })\r\n      } else {\r\n        console.error('Неверный логин или пароль')\r\n      }\r\n    })\r\n});\r\n</script>\r\n"],"mappings":";;EACaA,KAAK,EAAC;AAAO;gCACpBC,mBAAA,CAES;EAFDD,KAAK,EAAC;AAAe,I,aAC3BC,mBAAA,CAAyC;EAArCD,KAAK,EAAC;AAAc,GAAC,aAAW,E;;EAEjCA,KAAK,EAAC;AAAgB;;EACnBA,KAAK,EAAC,aAAa;EAAC,gBAAc,EAAC;;;EAChCA,KAAK,EAAC,cAAc;EAACE,GAAG,EAAC;;;EAIzBF,KAAK,EAAC,cAAc;EAACE,GAAG,EAAC;;;uBAVtCC,mBAAA,CAmBU,WAnBVC,UAmBU,GAlBRC,UAES,EACTJ,mBAAA,CAcM,OAdNK,UAcM,GAbJL,mBAAA,CAYO,QAZPM,UAYO,GAXLN,mBAAA,CAGQ,SAHRO,UAGQ,GAVlBC,gBAAA,CAOkD,UAEtC,G,gBAAAR,mBAAA,CAAqH;IAA9GD,KAAK,EAAC,cAAc;IAACU,IAAI,EAAC,OAAO;IAACC,WAAW,EAAC,oBAAoB;IAACC,IAAI,EAAC,OAAO;IAACC,QAAQ,EAAR,EAAQ;IAT3G,uBAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IASqHC,IAAA,CAAAC,UAAU,GAAAF,MAAA;iDAAVC,IAAA,CAAAC,UAAU,E,KAErHhB,mBAAA,CAGQ,SAHRiB,UAGQ,GAdlBT,gBAAA,CAWgD,UAEpC,G,gBAAAR,mBAAA,CAA8H;IAAvHD,KAAK,EAAC,cAAc;IAACU,IAAI,EAAC,UAAU;IAACC,WAAW,EAAC,EAAE;IAACC,IAAI,EAAC,UAAU;IAACO,YAAY,EAAC,IAAI;IAACN,QAAQ,EAAR,EAAQ;IAbjH,uBAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAa2HC,IAAA,CAAAI,aAAa,GAAAL,MAAA;iDAAbC,IAAA,CAAAI,aAAa,E,KAE9HnB,mBAAA,CAEM;IAFDD,KAAK,EAAC;EAAa,IACtBC,mBAAA,CAAoF;IAA7EoB,KAAK,EAAC,gBAAgB;IAAGC,OAAK,EAAEC,MAAA,CAAAD,OAAO;IAAEZ,IAAI,EAAC,QAAQ;IAACV,KAAK,EAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}